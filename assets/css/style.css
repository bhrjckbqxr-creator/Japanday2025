/* Japan Day 2025 – Mobile First UI vM1
   目標:
   - スマホで先に最適化（desktopは拡張）
   - 今っぽい: 大きめ余白, ガラス質感, ソフトシャドウ, 丸角, 微アニメ
   - 使いやすさ: 16px+ タップ領域, スティッキーヘッダー, 安全域, 片手操作
   - アクセシビリティ: prefers-reduced-motion / ダークモード
*/

/* ===== RESET (lite) & TOKENS ===== */
:root{
  /* brand palette */
  --brand: #e91e63;          /* JPピンク */
  --brand-2:#7c4dff;         /* アクセント紫 */
  --ink:   #111;             /* 本文 */
  --muted: #666;             /* 補助 */
  --bg:    #fafafa;          /* 背景 */
  --card:  rgba(255,255,255,.82);
  --line:  rgba(0,0,0,.07);

  /* sizes */
  --radius: 18px;
  --gap:    16px;
  --gap-lg: 22px;
  --container: 1100px;

  /* fluid typography */
  --fz-sm: clamp(13px, 3.2vw, 14px);
  --fz:    clamp(15px, 3.6vw, 16.5px);
  --fz-lg: clamp(18px, 5.2vw, 22px);
  --fz-xl: clamp(22px, 6.8vw, 30px);

  /* safe area */
  --pad-top:  calc(10px + env(safe-area-inset-top));
  --pad-bot:  calc(12px + env(safe-area-inset-bottom));
}

@media (prefers-color-scheme: dark){
  :root{
    --ink:#f3f3f3; --muted:#a9a9a9; --bg:#0f1115;
    --card: rgba(22,24,30,.7); --line: rgba(255,255,255,.07);
  }
}

*,*::before,*::after{ box-sizing:border-box }
html,body{ height:100%; background:var(--bg); color:var(--ink); }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol";
  font-size:var(--fz);
  line-height:1.65;
  -webkit-font-smoothing:antialiased;
}
img{ max-width:100%; height:auto; display:block }
a{ color:var(--brand); text-decoration:none }
a:hover{ opacity:.9 }

/* ===== LAYOUT ===== */
.container{ width:min(100%, var(--container)); margin:0 auto; padding:0 14px }
.section{ padding: 18px 0 26px }
.section > .container{ display:block }

/* ===== HEADER (mobile-first sticky, glass) ===== */
.site-header{
  position:sticky; top:0; z-index:50;
  backdrop-filter:saturate(160%) blur(10px);
  background:linear-gradient( to bottom, rgba(255,255,255,.8), rgba(255,255,255,.65) );
  border-bottom:1px solid var(--line);
  padding: var(--pad-top) 8px 8px;
}
@media (prefers-color-scheme: dark){
  .site-header{ background:linear-gradient(to bottom, rgba(20,22,28,.7), rgba(20,22,28,.5)) }
}
.nav{
  display:flex; align-items:center; gap:10px; overflow:auto; padding:0 6px;
  scrollbar-width:none;
}
.nav::-webkit-scrollbar{ display:none }
.brand{ font-weight:800; font-size:var(--fz-lg); margin-right:auto }
.langs{ display:flex; gap:6px }
.langs button{
  border:1px solid var(--line); background:var(--card); border-radius:999px;
  font-size:12px; padding:6px 10px
}
#nav-list{ display:flex; gap:6px; margin:8px 0 0; padding:0; list-style:none }
#nav-list a{
  display:block; padding:10px 12px; border-radius:999px;
  background:var(--card); border:1px solid var(--line); white-space:nowrap
}

/* ===== POSTER (full-mobile first) ===== */
.hero{ position:relative }
.poster{
  position:relative; overflow:hidden;
  background: radial-gradient(1200px 600px at 50% -200px, rgba(255,255,255,.45), transparent 60%);
}
.poster-img{
  height: 100dvh;             /* デバイス高にフィット */
  background: url("../img/top-hero.jpg") center / cover no-repeat;
  transform: translateZ(0);
}
.poster-overlay{
  position:absolute; inset:auto 10px 10px 10px; display:flex; gap:10px; pointer-events:none;
}
.poster-overlay .btn{
  pointer-events:auto;
  background:var(--card); border:1px solid var(--line); border-radius:999px;
  padding:10px 14px; font-weight:700;
}

/* ===== HOME ===== */
.section-title{ margin: 8px 0 12px; font-size:var(--fz-xl); font-weight:800 }
.card{
  background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
  padding:14px; box-shadow: 0 6px 24px rgba(0,0,0,.06);
}
.badge{ display:inline-block; background:rgba(0,0,0,.06); padding:4px 8px; border-radius:999px; font-size:12px }

/* ===== PROGRAM ===== */
#program-list{ display:grid; gap:10px }
#program-list .card{ display:grid; grid-template-columns: 90px 1fr; gap:12px; align-items:center }
#program-list .time{
  font-weight:800; color:var(--brand); background:rgba(233,30,99,.08);
  border:1px dashed rgba(233,30,99,.25); border-radius:12px; padding:6px 8px; text-align:center
}

/* ===== CHARACTERS ===== */
#character-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px }
.char-card{
  background:var(--card); border:1px solid var(--line); border-radius:16px; padding:10px; text-align:center
}
.char-card img{ aspect-ratio:1/1.1; object-fit:contain }

/* ===== HISTORY ===== */
#history-panels{ display:grid; gap:10px }
#history-panels .panel{ background:var(--card); border:1px solid var(--line); border-radius:16px; overflow:hidden }
#history-panels img{ width:100%; height:auto; display:block }

/* ===== MAPS (mobile tabs) ===== */
.map-tabs{ display:flex; gap:6px; overflow:auto; padding-bottom:6px; scrollbar-width:none }
.map-tabs::-webkit-scrollbar{ display:none }
.map-tabs .tab{
  padding:10px 12px; border-radius:999px; background:var(--card); border:1px solid var(--line)
}
.map-tabs .tab.active{ background:linear-gradient(180deg, #fff, rgba(255,255,255,.7)); border-color:rgba(0,0,0,.12) }
.map-images img{ width:100%; border-radius:16px; border:1px solid var(--line) }

/* ===== VENDORS（横スクロールカード） ===== */
#vendor-cards{
  display:grid; grid-auto-flow:column; grid-auto-columns: 82%;
  gap:12px; overflow-x:auto; scroll-snap-type:x mandatory; padding-bottom:8px;
}
.vendor-card{
  scroll-snap-align:start;
  background:var(--card); border:1px solid var(--line); border-radius:18px; padding:12px;
  display:grid; grid-template-columns:64px 1fr; gap:12px; align-items:center
}
.vendor-card .logo img{ width:64px; height:64px; object-fit:contain; border-radius:12px; background:#fff }
.vendor-card h3{ margin:0 0 6px; font-size:var(--fz-lg) }
.v-links a{ margin-right:10px }

/* ===== CONTACT ===== */
.contact-links a{ display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border:1px solid var(--line); border-radius:12px; background:var(--card); margin-right:8px }

/* ===== LIGHTBOX ===== */
#lightbox{ position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.7); z-index:70 }
#lightbox.open{ display:grid }
#lightbox img{ max-width:96vw; max-height:86vh; border-radius:12px; background:#000; }
#lightbox .close{ position:absolute; top:12px; right:12px; font-size:28px; color:#fff; background:transparent; border:none }

/* ===== PEEK mascots（Jasmine ← / Yui →） ===== */
.peek{
  position:fixed; bottom:calc(10vh + var(--pad-bot)); z-index:60;
  display:flex; align-items:flex-end; gap:10px;
  filter:drop-shadow(0 10px 22px rgba(0,0,0,.18));
  transition:transform .7s cubic-bezier(.2,.7,.2,1), opacity .7s;
  opacity:0;
}
.peek img{
  height:34vh; max-height:380px; width:auto; display:block; background:transparent;
  mix-blend-mode:multiply; /* 透過PNGなら削除可 */
  transform-origin: bottom center;
}
.peek .bubble{
  position:relative; max-width:240px; background:var(--card); border:1px solid var(--line);
  border-radius:14px; padding:10px 14px; backdrop-filter:blur(6px)
}
.peek .bubble::after{
  content:""; position:absolute; bottom:10px; width:14px; height:14px; background:var(--card);
  border:1px solid var(--line); transform:rotate(45deg)
}
.peek .close{ position:absolute; top:6px; right:6px; border:none; background:#0000; font-size:18px; opacity:.6; cursor:pointer }
.peek.from-left{ left:-28vw; transform:translateX(-8px) scale(.98)}
.peek.from-right{ right:-28vw; transform:translateX(8px) scale(.98)}
.peek.show.from-left{ left:10px; transform:translateX(0) scale(1); opacity:1}
.peek.show.from-right{ right:10px; transform:translateX(0) scale(1); opacity:1}
@keyframes bob{ 0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)} }
.peek.float img{ animation: bob 2.2s ease-in-out infinite }

@media (max-width:560px){
  .peek img{ height:30vh; max-height:320px }
  .vendor-card{ grid-auto-rows:auto }
}

/* ===== MICRO INTERACTION ===== */
.reveal{ opacity:0; transform: translateY(14px) scale(.98); transition: .6s cubic-bezier(.2,.7,.2,1) }
.reveal.in{ opacity:1; transform:none }

/* ===== REDUCED MOTION ===== */
@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important }
  .poster-img{ transform:none !important }
}

/* ===== DESKTOP UPGRADES ===== */
@media (min-width: 800px){
  .section{ padding: 24px 0 36px }
  #character-grid{ grid-template-columns:repeat(3,1fr) }
  #vendor-cards{ grid-auto-flow:row; grid-template-columns:repeat(3,1fr); grid-auto-columns:auto; overflow:visible }
  .vendor-card{ scroll-snap-align:none }
}
