/* Mobile-first stylish UI / vM1 */

/* ===== TOKENS ===== */
:root{
  --brand:#e91e63; --brand-2:#7c4dff;
  --ink:#111; --muted:#666; --bg:#fafafa; --card:rgba(255,255,255,.82); --line:rgba(0,0,0,.08);
  --radius:18px; --gap:16px; --container:1100px;
  --fz:clamp(15px,3.6vw,16.5px); --fz-lg:clamp(18px,5vw,22px); --fz-xl:clamp(22px,7vw,30px);
  --pad-top:calc(10px + env(safe-area-inset-top)); --pad-bot:calc(12px + env(safe-area-inset-bottom));
}
@media (prefers-color-scheme: dark){
  :root{ --ink:#f3f3f3; --muted:#a9a9a9; --bg:#0f1115; --card:rgba(22,24,30,.7); --line:rgba(255,255,255,.08) }
}
*,*::before,*::after{ box-sizing:border-box }
html,body{ height:100% }
body{ margin:0; background:var(--bg); color:var(--ink); font:var(--fz) ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial; line-height:1.65 }
img{ max-width:100%; height:auto; display:block }
a{ color:var(--brand); text-decoration:none }

.container{ width:min(100%,var(--container)); margin:0 auto; padding:0 14px }
.section{ padding:18px 0 26px }
.section-title{ margin:8px 0 12px; font-size:clamp(20px,6.2vw,26px); font-weight:800 }

/* ===== Sakura canvas ===== */
#petals{ position:fixed; inset:0; z-index:-1; pointer-events:none }

/* ===== Header ===== */
.site-header{
  position:sticky; top:0; z-index:50; border-bottom:1px solid var(--line);
  backdrop-filter:saturate(160%) blur(10px);
  background:linear-gradient(to bottom, rgba(255,255,255,.8), rgba(255,255,255,.65));
  padding:var(--pad-top) 0 8px;
}
@media (prefers-color-scheme: dark){
  .site-header{ background:linear-gradient(to bottom, rgba(20,22,28,.7), rgba(20,22,28,.5)) }
}
.nav{ display:flex; align-items:center; gap:10px; overflow:auto; padding:0 6px; scrollbar-width:none }
.nav::-webkit-scrollbar{ display:none }
.brand{ font-weight:800; font-size:var(--fz-lg); margin-right:auto }
.nav-list{ display:flex; gap:6px; list-style:none; padding:0; margin:0 }
.nav-list a{ display:block; padding:10px 12px; border-radius:999px; background:var(--card); border:1px solid var(--line); white-space:nowrap }

/* Language switch */
.lang-switch{ display:flex; gap:6px; margin-left:8px }
.lang-switch button{
  border:1px solid var(--line); background:var(--card); border-radius:999px; padding:6px 10px; font-size:12px
}
.lang-switch button.active{ border-color:var(--brand); box-shadow:0 0 0 2px color-mix(in srgb, var(--brand) 20%, transparent) }

/* ===== Hero Poster ===== */
.hero{ position:relative }
.poster{ position:relative; overflow:hidden; }
.poster-img{
  height:100dvh; background:url("../img/top-hero.jpg") center/cover no-repeat; transform:translateZ(0);
}
.poster-overlay{ position:absolute; inset:auto 10px 10px 10px; display:flex; gap:10px; pointer-events:none }
.btn{
  pointer-events:auto; background:var(--card); border:1px solid var(--line); border-radius:999px; padding:10px 14px; font-weight:700
}

/* ===== Cards & Lists ===== */
.card{ background:var(--card); border:1px solid var(--line); border-radius:var(--radius); padding:14px; box-shadow:0 6px 24px rgba(0,0,0,.06) }
#program-list{ display:grid; gap:10px }
#program-list .card{ display:grid; grid-template-columns:90px 1fr; gap:12px; align-items:center }
#program-list .time{ font-weight:800; color:var(--brand); background:rgba(233,30,99,.08); border:1px dashed rgba(233,30,99,.25); border-radius:12px; padding:6px 8px; text-align:center }

#character-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px }
.char-card{ background:var(--card); border:1px solid var(--line); border-radius:16px; padding:10px; text-align:center }
.char-card img{ aspect-ratio:1/1.1; object-fit:contain }

#history-panels{ display:grid; gap:10px }
#history-panels .panel{ background:var(--card); border:1px solid var(--line); border-radius:16px; overflow:hidden }
#history-panels img{ width:100% }

.map-tabs{ display:flex; gap:6px; overflow:auto; padding-bottom:6px; scrollbar-width:none }
.map-tabs::-webkit-scrollbar{ display:none }
.map-tabs .tab{ padding:10px 12px; border-radius:999px; background:var(--card); border:1px solid var(--line) }
.map-tabs .tab.active{ background:#fff; border-color:rgba(0,0,0,.12) }
.map-images img{ width:100%; border-radius:16px; border:1px solid var(--line) }

/* Vendors 横スクロール(スマホ) / グリッド(PC) */
#vendor-cards{ display:grid; grid-auto-flow:column; grid-auto-columns:82%; gap:12px; overflow-x:auto; scroll-snap-type:x mandatory; padding-bottom:8px }
.vendor-card{ scroll-snap-align:start; background:var(--card); border:1px solid var(--line); border-radius:18px; padding:12px; display:grid; grid-template-columns:64px 1fr; gap:12px; align-items:center }
.vendor-card .logo img{ width:64px; height:64px; object-fit:contain; border-radius:12px; background:#fff }
.vendor-card h3{ margin:0 0 6px; font-size:var(--fz-lg) }

/* Lightbox */
#lightbox{ position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.7); z-index:70 }
#lightbox.open{ display:grid }
#lightbox img{ max-width:96vw; max-height:86vh; border-radius:12px; background:#000 }
#lightbox .close{ position:absolute; top:12px; right:12px; font-size:28px; color:#fff; background:transparent; border:none }

/* Peek mascots */
.peek{ position:fixed; bottom:calc(10vh + var(--pad-bot)); z-index:60; display:flex; align-items:flex-end; gap:10px; filter:drop-shadow(0 10px 22px rgba(0,0,0,.18)); transition:transform .7s cubic-bezier(.2,.7,.2,1), opacity .7s; opacity:0 }
.peek img{ height:34vh; max-height:380px; width:auto; background:transparent; transform-origin:bottom center }
.peek .bubble{ position:relative; max-width:240px; background:var(--card); border:1px solid var(--line); border-radius:14px; padding:10px 14px; backdrop-filter:blur(6px) }
.peek .bubble .close{ position:absolute; top:6px; right:6px; border:none; background:#0000; font-size:18px; opacity:.6; cursor:pointer }
.peek.from-left{ left:-28vw; transform:translateX(-8px) scale(.98) }
.peek.from-right{ right:-28vw; transform:translateX(8px) scale(.98) }
.peek.show.from-left{ left:10px; transform:translateX(0) scale(1); opacity:1 }
.peek.show.from-right{ right:10px; transform:translateX(0) scale(1); opacity:1 }
@keyframes bob{ 0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)} }
.peek.float img{ animation:bob 2.2s ease-in-out infinite }

.reveal{ opacity:0; transform:translateY(14px) scale(.98); transition:.6s cubic-bezier(.2,.7,.2,1) }
.reveal.in{ opacity:1; transform:none }

@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important }
}

/* Desktop upgrades */
@media (min-width:800px){
  .section{ padding:24px 0 36px }
  #character-grid{ grid-template-columns:repeat(3,1fr) }
  #vendor-cards{ grid-auto-flow:row; grid-template-columns:repeat(3,1fr); grid-auto-columns:auto; overflow:visible }
  .vendor-card{ scroll-snap-align:none }
}
